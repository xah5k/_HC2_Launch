<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Authenticate</title>
		<meta property="og:locale" content="en-US" />
		<meta property="og:type" content="website" />

		<link type="image/png" rel="shortcut icon" href="favicon.png" />
		<script type="text/javascript" src="classes.js"></script>
		<script type="text/javascript">
			"use strict";
			var code = "ah5kauth";var askcode = prompt("Enter the global key to play: "); if (askcode != code) {alert("wrong code");document.write("console and game frame blocked.");}
			window.addEventListener("load", () => {
				if(document.location.href.startsWith("file:")) {
					alert("HTTP please, do not open this file locally, run a local HTTP server and load it via HTTP");
				}else {
					const relayId = Math.floor(Math.random() * 3);
					window.eaglercraftXOpts = {
						demoMode: false,
						container: "ah5k_custom_render",
						assetsURI: "assets.epk",
						localesURI: "lang/",
						worldsDB: "worlds",
						logInvalidCerts: true,
						servers: [
							{ addr: "null://null.null/", name: "servers dont work on this version :(" }
						],
						relays: [
							{ addr: "wss://relay.lax1dude.net/", comment: "lax1dude lan world relay #2", primary: relayId == 0 },
							{ addr: "wss://relay.shhnowisnottheti.me/", comment: "ayunami lan worldrelay #1", primary: relayId == 1 }
						]
					};
					
					var q = window.location.search;
					if(typeof q === "string" && q.startsWith("?")) {
						q = new URLSearchParams(q);
						var s = q.get("server");
						if(s) window.eaglercraftXOpts.joinServer = s;
					}
					if (askcode == code) {
						main();
					} else {
						document.write("game loading failed: invalid key/code");
					}
				}
			});
		</script>
	</head>
	<body style="margin:0px;width:100vw;height:100vh;overflow:hidden;" id="ah5k_custom_render">
	</body>
</html>
